<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NabuAI Context Menu Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #f9fafb;
        }
        .test-section h2 {
            color: #1f2937;
            margin-top: 0;
        }
        .highlight {
            background: #fef3c7;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #f59e0b;
        }
        .image-test {
            text-align: center;
            margin: 20px 0;
        }
        .image-test img {
            max-width: 300px;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .video-test {
            text-align: center;
            margin: 20px 0;
        }
        .video-test video {
            max-width: 300px;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .instructions {
            background: #dbeafe;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #3b82f6;
            margin: 20px 0;
        }
        .instructions h3 {
            margin-top: 0;
            color: #1e40af;
        }
        .instructions ol {
            margin: 10px 0;
            padding-left: 20px;
        }
        .instructions li {
            margin: 5px 0;
        }
        .status {
            background: #f0f9ff;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #0ea5e9;
            margin: 20px 0;
        }
        .status h3 {
            margin-top: 0;
            color: #0369a1;
        }
    </style>
</head>
<body>
    <h1>üß† NabuAI Context Menu Test Page</h1>
    
    <div class="status">
        <h3>üîç Test Status</h3>
        <p><strong>Extension Status:</strong> <span id="extensionStatus">Checking...</span></p>
        <p><strong>Context Menu:</strong> <span id="contextMenuStatus">Checking...</span></p>
        <p><strong>Storage Access:</strong> <span id="storageStatus">Checking...</span></p>
    </div>

    <div class="instructions">
        <h3>üìã How to Test Context Menu</h3>
        <ol>
            <li>Make sure the NabuAI extension is loaded in Chrome</li>
            <li>Try the different test scenarios below</li>
            <li>Check the browser console for any errors</li>
            <li>Verify content is saved in the extension dashboard</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>üéØ Test 1: Text Selection</h2>
        <p>Select any text in this paragraph to test the context menu functionality. You should be able to right-click on selected text and see a "Save to NabuAI" option. This demonstrates how the extension can capture and save specific pieces of text content from web pages.</p>
        
        <div class="highlight">
            <strong>Try this:</strong> Select this highlighted text, right-click, and choose "Save to NabuAI" from the context menu. You should see a modal dialog appear where you can add tags and save the content.
        </div>
        
        <p><strong>Expected Result:</strong> Context menu appears with "Save to NabuAI" option, dialog opens with text preview, tags input, and save button.</p>
    </div>

    <div class="test-section">
        <h2>üñºÔ∏è Test 2: Image Save</h2>
        <p>Right-click on the image below to test saving images to NabuAI. The extension should detect the right-click and show a context menu option to save the image.</p>
        
        <div class="image-test">
            <img src="https://picsum.photos/300/200?random=2" alt="Test image for NabuAI" title="Right-click to save this image">
        </div>
        
        <p><strong>Expected Result:</strong> Context menu appears with "Save Image to NabuAI" option, dialog opens with image preview, tags input, and save button.</p>
    </div>

    <div class="test-section">
        <h2>üé• Test 3: Video Save</h2>
        <p>Right-click on the video below to test saving videos to NabuAI. The extension should provide a context menu option to save the video content.</p>
        
        <div class="video-test">
            <video width="300" height="200" controls>
                <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        
        <p><strong>Expected Result:</strong> Context menu appears with "Save Video to NabuAI" option, dialog opens with video preview, tags input, and save button.</p>
    </div>

    <div class="test-section">
        <h2>üìù Test 4: Long Text Content</h2>
        <p>Here's some longer content you can select to test the text saving functionality with more substantial content:</p>
        
        <div class="highlight">
            <strong>Long Text Sample:</strong> This is a longer piece of text that you can select to test how the extension handles content that might exceed typical lengths. It includes multiple sentences and various types of content to ensure the save functionality works properly with different text sizes and formats. You can select all of this text or just portions of it to test the context menu functionality.
        </div>
        
        <p><strong>Expected Result:</strong> Text is properly truncated in the dialog if it's very long, and the full content is saved to storage.</p>
    </div>

    <div class="test-section">
        <h2>üîß Troubleshooting</h2>
        <p>If the context menu is not working:</p>
        <ul>
            <li>Check that the extension is properly loaded in <code>chrome://extensions/</code></li>
            <li>Ensure Developer mode is enabled</li>
            <li>Try reloading the extension</li>
            <li>Check the browser console for error messages</li>
            <li>Verify that the extension has the necessary permissions</li>
            <li>Make sure you're on a supported page (not chrome:// URLs)</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>‚úÖ Verification Steps</h2>
        <p>After testing, verify that content was saved:</p>
        <ol>
            <li>Click the NabuAI extension icon in Chrome toolbar</li>
            <li>Click "Go to NabuAI Dashboard"</li>
            <li>Check that your saved content appears in the list</li>
            <li>Verify that tags, URLs, and content are correct</li>
            <li>Try searching for saved content using the search bar</li>
        </ol>
    </div>

    <script>
        // Test script to check extension status
        function checkExtensionStatus() {
            // Check if extension is accessible
            if (typeof chrome !== 'undefined' && chrome.runtime && chrome.runtime.id) {
                document.getElementById('extensionStatus').textContent = '‚úÖ Loaded';
                document.getElementById('extensionStatus').style.color = 'green';
            } else {
                document.getElementById('extensionStatus').textContent = '‚ùå Not Found';
                document.getElementById('extensionStatus').style.color = 'red';
            }

            // Check context menu
            try {
                // This will only work if the extension is loaded
                if (typeof chrome !== 'undefined' && chrome.runtime && chrome.runtime.id) {
                    document.getElementById('contextMenuStatus').textContent = '‚úÖ Available';
                    document.getElementById('contextMenuStatus').style.color = 'green';
                } else {
                    document.getElementById('contextMenuStatus').textContent = '‚ùå Not Available';
                    document.getElementById('contextMenuStatus').style.color = 'red';
                }
            } catch (error) {
                document.getElementById('contextMenuStatus').textContent = '‚ùå Error';
                document.getElementById('contextMenuStatus').style.color = 'red';
            }

            // Check storage access
            try {
                if (typeof chrome !== 'undefined' && chrome.storage) {
                    document.getElementById('storageStatus').textContent = '‚úÖ Accessible';
                    document.getElementById('storageStatus').style.color = 'green';
                } else {
                    document.getElementById('storageStatus').textContent = '‚ùå Not Accessible';
                    document.getElementById('storageStatus').style.color = 'red';
                }
            } catch (error) {
                document.getElementById('storageStatus').textContent = '‚ùå Error';
                document.getElementById('storageStatus').style.color = 'red';
            }
        }

        // Run status check when page loads
        window.addEventListener('load', checkExtensionStatus);

        // Add some test content for selection
        console.log('üß† NabuAI Test Page Loaded');
        console.log('Select text and right-click to test the context menu!');
    </script>
</body>
</html>
